<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>QuoteFeed</title>
  <link rel="icon" href="data:,">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <!-- Fonts (switchable via CSS vars) -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Outfit:wght@400;600;800&family=Manrope:wght@400;600;800&family=Rubik:wght@400;600;800&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css"/>
</head>
<body>
  <header class="topbar">
    <div class="brand">QuoteFeed</div>

    <div class="searchwrap">
      <input id="searchInput" class="input" placeholder="Search titles, bodies, users, #topics‚Ä¶"/>
      <select id="sortSelect" class="input select">
        <option value="new">New</option>
        <option value="trending">Trending</option>
        <option value="popular">Popular</option>
        <option value="oldest">Oldest</option>
      </select>
    </div>

    <div id="userBox"></div>
  </header>

  <main class="layout">
    <aside class="side">
      <section class="card">
        <div class="section-title">My profile</div>
        <div id="myProfileBox" class="myprofile"></div>
      </section>

      <section class="card">
        <div class="section-title">Topics</div>
        <div id="topicCloud" class="chips"></div>
      </section>

      <section class="card">
        <div class="section-title">Actions</div>
        <button id="openComposer" class="btn brand" style="display:none">New Post</button>
        <button id="openSettings" class="btn">Settings</button>
      </section>
    </aside>

    <section class="content">
      <div id="feed"></div>
      <button id="loadMore" class="btn ghost" style="margin:16px auto;display:none">Load more</button>
    </section>
  </main>

  <footer class="footer">¬© QuoteFeed</footer>

  <!-- Composer modal -->
  <div id="composeBackdrop" class="backdrop" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title">Create a post</div>
        <button id="closeCompose" class="icon">‚úï</button>
      </div>
      <div class="modal-body">
        <input id="titleInput" class="input" maxlength="140" placeholder="Title / Header"/>
        <textarea id="bodyInput" class="input" rows="4" placeholder="Body text‚Ä¶"></textarea>

        <div class="row">
          <label class="btn ghost">
            <input id="fileInput" type="file" accept="image/*,video/*" hidden>
            ‚§¥Ô∏è Add image/video
          </label>
          <div id="fileInfo" class="meta">No file</div>
        </div>
        <div id="filePreview" class="preview" style="display:none"></div>

        <input id="topicsInput" class="input" placeholder="#topics (comma or space separated)"/>

        <div class="row right">
          <button id="postBtn" class="btn brand">Publish</button>
        </div>
        <div id="composeHint" class="meta" hidden>‚úì Posted</div>
      </div>
    </div>
  </div>

  <!-- Post modal -->
  <div id="postBackdrop" class="backdrop" aria-hidden="true">
    <div class="modal modal-wide">
      <div class="modal-head">
        <div class="modal-title">Post</div>
        <button id="closePostModal" class="icon">‚úï</button>
      </div>
      <div id="modalLoading" class="loading"><span class="spinner"></span><span class="loading-text">Loading‚Ä¶</span></div>
      <div id="postModalBody" class="modal-body"></div>
    </div>
  </div>

  <!-- Settings modal -->
  <div id="settingsBackdrop" class="backdrop" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title">Settings</div>
        <button id="closeSettings" class="icon">‚úï</button>
      </div>
      <div id="settingsBody" class="modal-body"></div>
    </div>
  </div>

  <!-- Auth modal ‚Äî QuoteFeed email/password + Discord -->
  <div id="authBackdrop" class="backdrop" aria-hidden="true">
    <div class="modal auth-modal">
      <div class="modal-head">
        <div class="modal-title">‚ú® QuoteFeed ‚ú®</div>
        <button id="closeAuth" class="icon">‚úï</button>
      </div>
      <div class="modal-body">
        <div class="auth-hero">Create your space for quotes, ideas & inspo.</div>

        <!-- segmented toggle -->
        <div class="segmented" role="tablist" aria-label="Auth mode">
          <button class="seg-item active" data-mode="signup" role="tab">üÜï Create New Account</button>
          <button class="seg-item" data-mode="login" role="tab">üîê Log In</button>
        </div>

        <div class="auth-form">
          <label class="input fancy">
            <span>üìß Email</span>
            <input id="authEmail" type="email" autocomplete="email" placeholder="you@example.com">
          </label>

          <label class="input fancy">
            <span>üîë Password</span>
            <input id="authPassword" type="password" autocomplete="current-password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢">
          </label>

          <!-- Remember me -->
          <label class="row" style="justify-content:flex-start;gap:8px;margin:6px 2px 10px">
            <input id="authRemember" type="checkbox" checked>
            <span class="meta">Keep me signed in</span>
          </label>

          <!-- Only shown for Create New Account (QuoteFeed account) -->
          <div id="signupExtras">
            <label class="input fancy">
              <span>üòé Username</span>
              <input id="authUsername" type="text" maxlength="24" placeholder="pick a name">
            </label>

            <div class="row">
              <label class="btn ghost">
                <input id="authAvatar" type="file" accept="image/*" hidden>
                üñºÔ∏è Choose profile photo
              </label>
              <div id="authAvatarHint" class="meta">Optional ‚Ä¢ square looks best</div>
            </div>
          </div>

          <button id="authSubmit" class="btn brand">Create Account</button>

          <div class="divider"><span>or</span></div>

          <button id="discordLoginBtn" class="btn discord">üé≠ Log in with Discord</button>

          <div id="authMsg" class="meta" style="margin-top:8px;"></div>
        </div>
      </div>
    </div>
  </div>

  <!-- Share modal -->
  <div id="shareBackdrop" class="backdrop" aria-hidden="true">
    <div class="modal">
      <div class="modal-head">
        <div class="modal-title">Share</div>
        <button id="closeShare" class="icon">‚úï</button>
      </div>
      <div class="modal-body">
        <input id="shareLink" class="input" readonly/>
        <div class="row">
          <button id="copyLink" class="btn brand">Copy link</button>
          <button id="copyMD" class="btn">Copy Markdown</button>
          <button id="webShare" class="btn ghost">System share</button>
          <button id="tweet" class="btn ghost">Twitter</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Dropdown template -->
  <template id="menuTpl">
    <div class="menu">
      <button data-act="profile">My profile</button>
      <button data-act="settings">Settings</button>
      <button data-act="logout">Sign out</button>
    </div>
  </template>

  <!-- Toasts -->
  <div id="toasts"></div>

  <!-- Config & libs -->
  <script src="https://unpkg.com/@supabase/supabase-js@2.45.4/dist/umd/supabase.js"></script>
  <script src="config.js"></script>
  <script src="app.js"></script>
</body>
</html>
